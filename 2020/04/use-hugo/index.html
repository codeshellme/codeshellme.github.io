<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>如何用hugo 搭建博客 - 码农充电站</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="@码农充电站" /><meta name="description" content="1，Hugo 简介 搭建个人博客有很多开源的博客框架，我们要介绍的框架叫作Hugo。Hugo 是一个基于Go 语言的框架，可以快速方便的创建自己的博" /><meta name="keywords" content="码农充电站, 编程, 编程语言, 编程教程, 编程入门" />






<meta name="generator" content="Hugo 0.68.3 with theme even" />


<link rel="canonical" href="https://codeshellme.github.io/2020/04/use-hugo/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="如何用hugo 搭建博客" />
<meta property="og:description" content="1，Hugo 简介 搭建个人博客有很多开源的博客框架，我们要介绍的框架叫作Hugo。Hugo 是一个基于Go 语言的框架，可以快速方便的创建自己的博" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://codeshellme.github.io/2020/04/use-hugo/" />
<meta property="article:published_time" content="2020-04-06T01:37:56+08:00" />
<meta property="article:modified_time" content="2020-04-06T01:37:56+08:00" />
<meta itemprop="name" content="如何用hugo 搭建博客">
<meta itemprop="description" content="1，Hugo 简介 搭建个人博客有很多开源的博客框架，我们要介绍的框架叫作Hugo。Hugo 是一个基于Go 语言的框架，可以快速方便的创建自己的博">
<meta itemprop="datePublished" content="2020-04-06T01:37:56&#43;08:00" />
<meta itemprop="dateModified" content="2020-04-06T01:37:56&#43;08:00" />
<meta itemprop="wordCount" content="5633">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="如何用hugo 搭建博客"/>
<meta name="twitter:description" content="1，Hugo 简介 搭建个人博客有很多开源的博客框架，我们要介绍的框架叫作Hugo。Hugo 是一个基于Go 语言的框架，可以快速方便的创建自己的博"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">码农充电站</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/2020/04/love-music/">
        <li class="mobile-menu-item">音乐</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">码农充电站</a>
  
  <div>
      <h4 style="margin:0;">
         专注编程技术分享 
      </h4>
  </div>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/2020/04/love-music/">音乐</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">如何用hugo 搭建博客</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-04-06 </span>
        <div class="post-category">
            <a href="/categories/%E6%8A%80%E6%9C%AF%E5%85%A5%E9%97%A8/"> 技术入门 </a>
            </div>
          <span class="more-meta"> 5633 字 </span>
          <span class="more-meta"> 阅读约需 12 分钟 </span>
        

      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#1hugo-简介">1，Hugo 简介</a></li>
    <li><a href="#2hugo-安装">2，Hugo 安装</a>
      <ul>
        <li><a href="#在windows-中安装">在Windows 中安装</a></li>
        <li><a href="#在macos-中安装">在MacOs 中安装</a></li>
        <li><a href="#在linux-中安装">在Linux 中安装</a></li>
      </ul>
    </li>
    <li><a href="#3hugo-是否安装成功">3，Hugo 是否安装成功</a></li>
    <li><a href="#4使用hugo-创建博客">4，使用Hugo 创建博客</a></li>
    <li><a href="#5使用主题">5，使用主题</a></li>
    <li><a href="#6启动博客服务">6，启动博客服务</a></li>
    <li><a href="#7编写博客文章">7，编写博客文章</a></li>
    <li><a href="#8hugo-的配置文件">8，Hugo 的配置文件</a></li>
    <li><a href="#9将博客部署在git">9，将博客部署在Git</a>
      <ul>
        <li><a href="#91准备要部署的内容">9.1，准备要部署的内容</a></li>
        <li><a href="#92部署到git">9.2，部署到Git</a></li>
        <li><a href="#93访问公网地址">9.3，访问公网地址</a></li>
      </ul>
    </li>
    <li><a href="#10给博客添加评论功能">10，给博客添加评论功能</a>
      <ul>
        <li><a href="#101注册登录leancloud-账号">10.1，注册登录leancloud 账号</a></li>
        <li><a href="#102创建一个应用并记录app-id-和app-key">10.2，创建一个应用并记录<code>App Id</code> 和<code>App Key</code></a></li>
        <li><a href="#103创建两个存储">10.3，创建两个存储</a></li>
        <li><a href="#104为应用添加安全域名">10.4，为应用添加安全域名</a></li>
      </ul>
    </li>
    <li><a href="#11使用valine-评论系统">11，使用Valine 评论系统</a></li>
    <li><a href="#12在hugo-博客中使用valine">12，在Hugo 博客中使用Valine</a>
      <ul>
        <li><a href="#121编写commentshtml-文件">12.1，编写comments.html 文件</a></li>
        <li><a href="#122使用commentshtml-文件">12.2，使用comments.html 文件</a></li>
        <li><a href="#123修改配置文件">12.3，修改配置文件</a></li>
      </ul>
    </li>
    <li><a href="#13如何让hugo-中的文章支持html-元素">13，如何让Hugo 中的文章支持HTML 元素</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="1hugo-简介">1，Hugo 简介</h2>
<p>搭建个人博客有很多开源的博客框架，我们要介绍的框架叫作<a href="https://gohugo.io/">Hugo</a>。Hugo 是一个基于Go 语言的框架，可以快速方便的创建自己的博客。</p>
<p>Hugo 支持Markdown 语法，我们可以将自己的文章写成Markdown 的格式，放在我们用Hugo 创建的博客系统中，从而展示给他人。</p>
<p><img src="https://img-blog.csdnimg.cn/20200406173012343.png" alt=""></p>
<h2 id="2hugo-安装">2，Hugo 安装</h2>
<h3 id="在windows-中安装">在Windows 中安装</h3>
<p>首先安装choco 包管理器，需要在<strong>管理员权限</strong>下运行cmd，执行如下命令，一般情况下，网络没有问题，即可安装成功：</p>
<pre><code class="language-shell">powershell -NoProfile -ExecutionPolicy unrestricted -Command &quot;iex ((new-object net.webclient).DownloadString('https://chocolatey.org/install.ps1'))&quot;

# 设置环境变量
SET PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin
</code></pre>
<p>然后使用choco 安装 hugo：</p>
<pre><code class="language-powershell"># 墙内安装可能较慢
choco install hugo -confirm
</code></pre>
<h3 id="在macos-中安装">在MacOs 中安装</h3>
<p>使用brew 命令安装：</p>
<pre><code class="language-shell">brew install hugo
</code></pre>
<h3 id="在linux-中安装">在Linux 中安装</h3>
<p>在Linux 中可以使用snap 命令来安装，执行下面命令：</p>
<pre><code class="language-shell">snap install hugo
</code></pre>
<p>如果你的Linux 是Ubuntu 版本，也可是使用apt 来安装，但是apt 安装的hugo 可能不是最新版的，这样会对一些hugo 主题的使用有所限制。</p>
<p>这种情况下我们可以到<a href="https://github.com/gohugoio/hugo/releases">hugo 的github 仓库</a> 中下载安装包来安装hugo，我们可以下载一个deb 包，然后使用如下命令安装：</p>
<pre><code class="language-shell">dpkg -i &lt;package.deb&gt;
</code></pre>
<h2 id="3hugo-是否安装成功">3，Hugo 是否安装成功</h2>
<p>不管在哪种系统中安装Hugo，最后我们都可以使用下面命令查看Hugo 是否安装成功：</p>
<pre><code class="language-shell">&gt;&gt;&gt; hugo version
Hugo Static Site Generator v0.68.3-157669A0 linux/amd64 BuildDate: 2020-03-24T12:05:34Z
</code></pre>
<h2 id="4使用hugo-创建博客">4，使用Hugo 创建博客</h2>
<p>hugo 安装成功后，使用<code>hugo new site</code> 命令创建博客：</p>
<pre><code class="language-shell"># 博客项目的名字为myblog
hugo new site myblog
</code></pre>
<p>这个命令会创建一个名为myblog 的目录，这就是博客的根目录。目录结构如下：</p>
<pre><code class="language-shell">├── archetypes
│   └── default.md
├── config.toml			# 博客站点的配置文件
├── content				# 博客文章所在目录
├── data				
├── layouts				# 网站布局
├── static				# 一些静态内容
└── themes				# 博客主题
</code></pre>
<p>5，下载博客主题</p>
<p>创建好博客项目后，接下来是下载<a href="https://themes.gohugo.io/">hugo博客的主题</a>，这里有很多主题，我们可以任意挑选，比如我们选择了<a href="https://themes.gohugo.io/hugo-theme-bootstrap4-blog/">bootstrap4-blog 主题</a>。</p>
<p><img src="https://img-blog.csdnimg.cn/20200406173051782.png" alt=""></p>
<p>然后在myblog 目录下使用git 命令来下载主题：</p>
<pre><code class="language-shell">git clone https://github.com/alanorth/hugo-theme-bootstrap4-blog.git themes/hugo-theme-bootstrap4-blog
</code></pre>
<p>下载下来的主题会放在themes 目录中：</p>
<pre><code class="language-shell">└── hugo-theme-bootstrap4-blog
    ├── CHANGELOG.md
    ├── LICENSE.txt
    ├── README.md
    ├── archetypes
    ├── assets
    ├── exampleSite         # 本主题示例内容
    |      ├── content		# 示例博客文章
    │      |-- static
    │      |-- config.toml	# 本主题配置
    ├── i18n
    ├── images
    ├── layouts
    ├── package-lock.json
    ├── package.json
    ├── screenshot.png
    ├── source
    ├── theme.toml		
    └── webpack.config.js
</code></pre>
<h2 id="5使用主题">5，使用主题</h2>
<p>我们将exampleSite 目录中的内容，复制到博客根目录myblog 中，在myblog 目录中执行命令：</p>
<pre><code class="language-shell">cp themes/hugo-theme-bootstrap4-blog/exampleSite/* ./ -r
</code></pre>
<h2 id="6启动博客服务">6，启动博客服务</h2>
<p>使用下面命令启动服务：</p>
<pre><code class="language-shel">&gt;&gt;&gt; hugo server
                   | EN  
-------------------+-----
  Pages            | 29  
  Paginator pages  |  0  
  Non-page files   |  0  
  Static files     |  1  
  Processed images |  0  
  Aliases          | 12  
  Sitemaps         |  1  
  Cleaned          |  0  

Built in 60 ms
Watching for changes in /home/wp/t/myblog/{archetypes,content,data,layouts,static,themes}
Watching for config changes in /home/wp/t/myblog/config.toml
Environment: &quot;development&quot;
Serving pages from memory
Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender
Web Server is available at http://localhost:1313/ (bind address 127.0.0.1)
Press Ctrl+C to stop
</code></pre>
<p>可以看到服务默认会在占用1313 端口，在浏览器中访问<code>http://localhost:1313/</code> 地址。</p>
<p>如果一切正常，我们会看到一个像<a href="https://themes.gohugo.io/theme/hugo-theme-bootstrap4-blog/">hugo 官网演示一样的页面</a>。</p>
<h2 id="7编写博客文章">7，编写博客文章</h2>
<p>你只需要按照Markdown 的格式编写自己的文章，然后将写好的文章放在<code>myblog/content/posts</code>，hugo 就会读取到这片文章，并将这片文章展示在比的博客中。</p>
<p>与普通Markdown 文章不一样的地方是，你需要在文章的开头写入如下结构的内容，这些内容包含在<code>三杠线</code>之间，在<code>三杠线</code>下边就是Markdown 的正文了：</p>
<pre><code class="language-shell">---
文章属性内容
---
Markdown 正文
</code></pre>
<p>这些内容会被hugo 解析，作为当前文章的一些属性，常用的属性如下：</p>
<pre><code class="language-shell">---
title: &quot;文章标题&quot;			# 文章标题
author: &quot;作者&quot;				# 文章作者
description : &quot;描述信息&quot;	# 文章描述信息
date: 2015-09-28			# 文章编写日期
lastmod: 2015-04-06			# 文章修改日期

tags = [					# 文章所属标签
    &quot;文章标签1&quot;,
    &quot;文章标签2&quot;
]
categories = [				# 文章所属标签
    &quot;文章分类1&quot;,
    &quot;文章分类2&quot;,
]
keywords = [				# 文章关键词
    &quot;Hugo&quot;,
    &quot;static&quot;,
    &quot;generator&quot;,
]

next: /tutorials/github-pages-blog		# 下一篇博客地址
prev: /tutorials/automated-deployments	# 上一篇博客地址
---
</code></pre>
<p>比如我们编写了这样一篇文章，文件名为my-first.md：</p>
<pre><code class="language-shel">---
title: &quot;我的第一篇博客&quot;                         
author: &quot;我是作者&quot;  
description : &quot;这是描述信息&quot;    
date: 2018-09-18        
lastmod: 2018-09-26             

tags : [                                    
&quot;我的博客标签&quot;,
]
categories : [                              
&quot;我的博客分类&quot;,
]
keywords : [                                
&quot;我的博客关键字&quot;,
]
---
这里是Markdown 正文
</code></pre>
<p>我们将<code>myblog/content/posts</code> 目录中的其它文章删除，只留我们自己的这篇文章：</p>
<pre><code class="language-shell">.
└── my-first.md 
</code></pre>
<p>使用<code>hugo server</code> 重启博客服务，打开地址<code>http://localhost:1313/</code>，可以看到现在的博客中，只有我们自己写的文章：</p>
<p><img src="https://img-blog.csdnimg.cn/20200406173237696.png" alt=""></p>
<h2 id="8hugo-的配置文件">8，Hugo 的配置文件</h2>
<p>博客的配置文件可以根据自己的需要修改，我们来看下<code>Bootstrap v4</code> 主题的配置文件，这些配置属性通过应为并不难理解。</p>
<p>配置文件中属性的内容我做了修改，并添加了中文注释。</p>
<pre><code class="language-shell"># Hugo 属性设置

# 网站地址
baseurl = &quot;https://localhost:1313/&quot;	

# 网站语言
languageCode = &quot;en-us&quot;				

# 网站title
title = &quot;我的博客&quot;					 

# 主题的名字，这个要跟myblog/themes 目录中的子目录的目录名一致
theme = &quot;hugo-theme-bootstrap4-blog&quot;	

# home/category/tag 页面显示的文章数 (Default: 10)
paginate = 5

# home/category/tag 页面用于摘要的字数 (Default: 70)
summaryLength = 50

# optionally override the site's footer with custom copyright text
# copyright = &quot;Except where otherwise noted, content on this site is licensed under a [Creative Commons Attribution 4.0 International license](https://creativecommons.org/licenses/by-sa/4.0/).&quot;
#googleAnalytics = &quot;UA-123-45&quot;
#disqusShortname = &quot;XYW&quot;

# 博客链接的路径格式
[permalinks]
  posts = &quot;/:year/:month/:title/&quot;
  page = &quot;/:slug/&quot;
  
# 顶部栏
[[menu.navbar]]
  name = &quot;首页&quot;
  url = &quot;http://localhost:1313&quot;

# 侧边栏，可以写多个
[[menu.sidebar]]
  name = &quot;新浪&quot;
  url = &quot;https://www.sina.com&quot;

[[menu.sidebar]]
  name = &quot;Github&quot;
  url = &quot;https://github.com&quot;

# Theme 属性设置
#
[params]
  # Site author
  author = &quot;作者名&quot;

  # homepage 页描述信息
  description = &quot;我的博客站点&quot;

  # Show header (default: true)
  #header_visible = true

  # Format dates with Go's time formatting
  date_format = &quot;Mon Jan 02, 2006&quot;

  # verification string for Google Webmaster Tools
  #google_verify_meta = &quot;BAi57DROASu4b2mkVNA_EyUsobfA7Mq8BmSg7Rn-Zp9&quot;

  # verification string for Bing Webmaster Tools
  #bing_verify_meta = &quot;3DA353059F945D1AA256B1CD8A3DA847&quot;

  # verification string for Yandex Webmaster Tools
  #yandex_verify_meta = &quot;66b077430f35f04a&quot;

  # Optionally display a message about the site's use of cookies, which may be
  # required for your site in the European Union. Set the parameter below to a
  # page where the user can get more information about cookies, either on your
  # site or externally, for example:
  #cookie_consent_info_url = &quot;/cookie-information/&quot;
  #cookie_consent_info_url = &quot;http://cookiesandyou.com&quot;

  # show sharing icons on pages/posts (default: true)
  #sharingicons = true

  # Display post summaries instead of content in list templates (default: true)
  #truncate = true

  # Disable the use of sub-resource integrity on CSS/JS assets (default: false)
  # Useful if you're using a CDN or other host where you can't control cache headers
  #disable_sri = false

  [params.sidebar]
    # Optional about block for sidebar (can be Markdown)
    about = &quot;我的博客[简单示例](http://localhost:1313/).&quot;

    # 侧边栏显示最近几条文章 (Default: 5)
    #num_recent_posts = 2

  [params.social]
    # Optional, used for attribution in Twitter cards (ideally not a person
    # for example: nytimes, flickr, NatGeo, etc).
    # See: https://dev.twitter.com/cards/types/summary-large-image
    twitter = &quot;username&quot;

# Default content language for Hugo 0.17's multilingual support (default is &quot;en&quot;)
# See: https://github.com/spf13/hugo/blob/master/docs/content/content/multilingual.md
#DefaultContentLanguage = &quot;en&quot;

# Languages to render
#[languages.en]
#[languages.bg]
  # Bulgarian date format is dd.mm.yyyy
  #date_format = &quot;02.01.2006&quot;

# vim: ts=2 sw=2 et
</code></pre>
<p>我们使用以上配置文件，再次启动服务，访问<code>http://localhost:1313</code>，得到如下页面：</p>
<p><img src="https://img-blog.csdnimg.cn/20200406173414955.png" alt=""></p>
<h2 id="9将博客部署在git">9，将博客部署在Git</h2>
<p>建好自己的博客后，需要将其部署在公网，才能让别人访问。有两种方法：</p>
<ul>
<li>购买自己的域名和服务器，将博客部署在上面。</li>
<li>将博客托管在github。</li>
</ul>
<p>这里我们介绍第2中方式。</p>
<h3 id="91准备要部署的内容">9.1，准备要部署的内容</h3>
<p>要想讲博客部署在github，首先得有一个github 账号。</p>
<p>然后需要在github 上创建一个仓库，用于存放我们的博客系统。</p>
<p>我们创建的仓库的名字应该是这种格式&quot;<code>账户名.github.io</code>&rdquo;，比如我创建的仓库的名字为&quot;<code>codeshellme.github.io</code>&rdquo;。</p>
<p>要向仓库中存放的内容，使用<code>hugo</code> 命令生成的。在myblog 目录下，运行<code>hugo</code> 命令：</p>
<pre><code class="language-shell">&gt;&gt;&gt; hugo
                   | EN  
-------------------+-----
  Pages            | 14  
  Paginator pages  |  0  
  Non-page files   |  0  
  Static files     |  1  
  Processed images |  0  
  Aliases          |  6  
  Sitemaps         |  1  
  Cleaned          |  0  

Total in 74 ms
</code></pre>
<p>执行成功后，会生成一个public 目录，这个目录中的内容，就是我们博客系统的所有内容，我们需要将这些内容存放在Git 仓库中。</p>
<h3 id="92部署到git">9.2，部署到Git</h3>
<p>按照如下步骤将博客内容上传到Git 仓库，在public 目录下，依次执行下面的命令：</p>
<pre><code class="language-shell"># 初始化仓库
git init

# 将所有内容添加到git
git add .

# 提交到git 本地
git commit -m &quot;我的博客第一次提交&quot;

# 关联到远程git，注意这里需要写你自己的git 地址
git remote add origin https://github.com/codeshellme/codeshellme.github.io.git

# 推送到远程git
git push origin master
</code></pre>
<h3 id="93访问公网地址">9.3，访问公网地址</h3>
<p>经过上面的步骤，我们就将博客内容托管在了github。那么你的博客的地址将是这种格式：</p>
<pre><code class="language-shel">https://仓库名字
</code></pre>
<p>例如我的博客地址就是：</p>
<pre><code>https://codeshellme.github.io
</code></pre>
<p>访问这个地址就可以访问我们的博客了。</p>
<p>如果以后我们写了新的博客，则需要再使用<code>hugo</code> 命令生成新的内容，再将新的内容push 到Git 仓库就可以</p>
<h2 id="10给博客添加评论功能">10，给博客添加评论功能</h2>
<p>博客有了评论功能才能跟读者互动，所以评论功能对一个博客来说也是必不可少的。</p>
<p>可用的<code>评论系统插件</code> 有挺多的，比如：</p>
<ul>
<li><a href="http://changyan.kuaizhan.com/">畅言</a></li>
<li><a href="http://livere.com/">LiveRe</a></li>
<li><a href="https://github.com/imsun/gitment">gitment</a></li>
<li><a href="https://github.com/imsun/gitmentps://gitalk.github.io/">gitalk</a></li>
<li><a href="https://valine.js.org/">Valine</a></li>
</ul>
<p>在这几个之中，我比较喜欢的<code>Valine</code>，因为其它几个在评论的时候都需要读者登录账号，授权等等，我觉得这样比较麻烦，会让读者失去评论的兴趣。</p>
<p>而<code>Valine</code> 不需要读者登录就可以对文章进行评论，而且简洁高效。下面我们主要介绍如何使用<code>Valine</code> 来为我们的博客系统增加评论功能。</p>
<h3 id="101注册登录leancloud-账号">10.1，注册登录leancloud 账号</h3>
<p>首先需要<a href="https://leancloud.cn/dashboard/login.html#/signup">注册</a>并<a href="https://leancloud.cn/dashboard/login.html#/signin">登录</a>一个leancloud 账号，登录账号之后，进入下一步。</p>
<h3 id="102创建一个应用并记录app-id-和app-key">10.2，创建一个应用并记录<code>App Id</code> 和<code>App Key</code></h3>
<p>登录账号后，进入<a href="https://leancloud.cn/dashboard/applist.html#/apps">控制台</a>，点击<code>创建应用</code>来创建一个应用</p>
<p><img src="https://img-blog.csdnimg.cn/20200408220821864.png" alt=""></p>
<p>应用创建好以后，进入刚刚创建的应用，点击左下角的<code>设置</code>&gt;<code>应用Key</code>，就能看到你的<code>APP ID</code>和<code>APP Key</code>了：</p>
<p><img src="https://img-blog.csdnimg.cn/20200408220922684.png" alt=""></p>
<h3 id="103创建两个存储">10.3，创建两个存储</h3>
<p>因为<code>评论</code>和<code>文章阅读数统计</code>依赖于存储，所以要建立两个存储 <code>Class</code>，分别命名为<code>Counter</code> （用于计数功能）和 <code>Comment</code>（用于评论功能）。</p>
<p>左边栏找到并点击 <code>存储</code>，点击 <code>创建Class</code>:</p>
<p><img src="https://img-blog.csdnimg.cn/20200408221301802.png" alt=""></p>
<h3 id="104为应用添加安全域名">10.4，为应用添加安全域名</h3>
<p>左边栏点击<code>设置</code>，找到<code>安全中心</code>，点击后会看到<code>安全域名</code>设置框，输入博客使用的域名，点击保存即可，比如我这里填写的是：</p>
<pre><code class="language-powershell">https://codeshellme.github.io/
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200408221806881.png" alt=""></p>
<p>到这里为止，<code>leancloud </code> 账号的设置工作才算完成。接下来我们来看如何使用<code>Valine</code> 评论系统。</p>
<h2 id="11使用valine-评论系统">11，使用Valine 评论系统</h2>
<p>这里我写一个简单<code>html</code> 页面，来演示如何使用<code>Valine</code>，代码如下：</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;title&gt;Valine 评论测试&lt;/title&gt;
    &lt;!-- 引入Valine js 脚本 --&gt;
    &lt;script src='https://unpkg.com/valine/dist/Valine.min.js'&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h2&gt;下面就是Valine 评论系统&lt;/h2&gt;
    &lt;hr /&gt;
    &lt;div id=&quot;vcomments&quot;&gt;&lt;/div&gt;
    &lt;script&gt;
    new Valine({
        el: '#vcomments',
        appId: 'xxx',	// 这里填写 10.2 节我们得到的App Id
        appKey: 'yyy',	// 这里填写 10.2 节我们得到的App Key
        notify: false,
        verify: true,
        avatar: 'robohash',
        placeholder: '在这里评论'
    })
    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<p>这里面有一些<code>Valine</code> 参数需要解释一下：
| 参数 |作用  |
|&ndash;|&ndash;|
|  appId |  这是在 10.2 节得到的App Id |
|  appKey | 这是在 10.2 节得到的App Key |
| notify | 用于控制是否开启邮件通知功能 |
| verify | 用于控制是否开启评论验证码功能 |
| avatar | 用于配置评论项中用户头像样式 |
| placeholder | 评论框的提示符 |</p>
<p>可以参见<a href="https://valine.js.org/configuration.html">这里</a>查看更多配置项。</p>
<p>然后将上面的<code>html</code> 代码放在<code>Apache</code> 中（也可以是其它<code>Web Server</code>），从浏览器中访问这个<code>html</code> 页面，是这样的：</p>
<p><img src="https://img-blog.csdnimg.cn/20200408225530192.png" alt=""></p>
<p>我们就可以在这里评论了。</p>
<p>我们可以进入下面的页面，对这些评论内容进行管理，比如删除评论：</p>
<p><img src="https://img-blog.csdnimg.cn/2020040822592251.png" alt=""></p>
<h2 id="12在hugo-博客中使用valine">12，在Hugo 博客中使用Valine</h2>
<p>有些<code>Hugo</code> 主题就自带了<code>Valine</code> 评论功能，我们只需要在配置文件<code>config.toml</code> 中配置就可以使用。</p>
<p>一般配置代码就是下面的样子：</p>
<pre><code class="language-powershell">[params.valine]
    enable = true	# 打开评论功能
    appId = 'xxx'
    appKey = 'yyy'
    notify = false  
    verify = true 
    avatar = 'robohash' 
    placeholder = '评论一下，说明你来过~'
    visitor = true
</code></pre>
<p>但是，有些<code>Hugo</code> 主题并没自带<code>Valine</code> 评论功能，这就需要我们自己在<code>Hugo</code> 框架中加入<code>Valine</code> 代码。</p>
<p>比如，我们本篇文章中使用的<code>hugo-theme-bootstrap4-blog</code> 主题，就没有<code>Valine</code> 评论的功能。</p>
<p>我们需要稍微了解一下<code>hugo-theme-bootstrap4-blog</code>  主题的<code>代码结构</code>和<code>语法</code>，才知道在哪里添加怎样的<code>Valine</code> 代码。</p>
<p>下面跟着我的步骤，为<code>hugo-theme-bootstrap4-blog</code>  主题添加<code>Valine</code> 评论功能。</p>
<h3 id="121编写commentshtml-文件">12.1，编写comments.html 文件</h3>
<p>编写代码，文件名为<code>comments.html</code>，并将代码放入<code>themes/hugo-theme-bootstrap4-blog/layouts/partials/</code> 目录中，代码如下（如果看不懂也没有关系，照着做就行）：</p>
<pre><code class="language-html">{{ if and .IsPage (ne .Params.comment false) -}}

  &lt;!-- valine --&gt;
  {{- if .Site.Params.valine.enable -}}
  &lt;!-- id 将作为查询条件 --&gt;
    {{- if .Site.Params.valine.visitor -}}
	  &lt;span id=&quot;{{ .RelPermalink | relURL }}&quot; class=&quot;leancloud_visitors&quot; data-flag-title=&quot;{{ .Title }}&quot;&gt;
		&lt;span class=&quot;post-meta-item-text&quot;&gt;文章阅读量 &lt;/span&gt;
		&lt;span class=&quot;leancloud-visitors-count&quot;&gt;0&lt;/span&gt;
		&lt;p&gt;&lt;/p&gt;
	  &lt;/span&gt;
    {{- end }}
  &lt;div id=&quot;vcomments&quot;&gt;&lt;/div&gt;
  &lt;script src=&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;&gt;&lt;/script&gt;
  &lt;script src='//unpkg.com/valine/dist/Valine.min.js'&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;
    new Valine({
        el: '#vcomments' ,
        appId: '{{ .Site.Params.valine.appId }}',
        appKey: '{{ .Site.Params.valine.appKey }}',
        notify: {{ .Site.Params.valine.notify }},
        verify: {{ .Site.Params.valine.verify }},
        avatar:'{{ .Site.Params.valine.avatar }}',
        placeholder: '{{ .Site.Params.valine.placeholder }}',
        visitor: {{ .Site.Params.valine.visitor }}
    });
  &lt;/script&gt;
  {{- end }}

{{- end }}
</code></pre>
<h3 id="122使用commentshtml-文件">12.2，使用comments.html 文件</h3>
<p>在<code>themes/hugo-theme-bootstrap4-blog/layouts/_default/single.html</code> 文件中加入下面代码，引入<code>comments.html</code> 文件：</p>
<pre><code class="language-html">{{ partial &quot;comments.html&quot; . }}
</code></pre>
<p>你在<code>single.html</code> 的什么位置加入这行代码，<code>Valine 评论区</code>就在页面的什么位置。</p>
<h3 id="123修改配置文件">12.3，修改配置文件</h3>
<p>在配置文件<code>config.toml</code>中加入下面配置项：</p>
<pre><code class="language-powershell">[params.valine]
    enable = true	# 打开评论功能
    appId = 'xxx'	# 填写正确的appId
    appKey = 'yyy'	# 填写正确的appKey
    notify = false  
    verify = true 
    avatar = 'robohash' 
    placeholder = '评论一下，说明你来过~'
    visitor = true	# 开启计数功能
</code></pre>
<p>重启博客系统，访问博客中的文章，可见文章中就出现了<code>Valine 评论区</code>：</p>
<p><img src="https://img-blog.csdnimg.cn/20200408232726339.png" alt=""></p>
<p>到此为止，我们就在<code>Hugo</code> 博客中加入了评论功能。</p>
<h2 id="13如何让hugo-中的文章支持html-元素">13，如何让Hugo 中的文章支持HTML 元素</h2>
<p>考虑到安全性问题，如果你在<code>Markdown</code> 中加入<code>HTML</code> 元素，Hugo 是不支持这种情况的，Hugo 框架会将<code>Markdown</code> 中的<code>HTML</code> 元素转换成如下字符串作为<code>注释</code>：</p>
<pre><code class="language-html">&lt;!-- raw HTML omitted --&gt;
</code></pre>
<p>比如我们写了一篇这样的文章，内容如下：</p>
<pre><code class="language-shell">---
title: &quot;test&quot; 
date: 2020-04-09T21:38:52+08:00
lastmod: 2020-04-09T21:41:52+08:00
categories: [&quot;test&quot;]
author: &quot;@码农加油站&quot; 
weight: 40
slug: &quot;test-md&quot;
---

这只是一个测试文章
&lt;h1&gt;这里有一句话&lt;/h1&gt;
</code></pre>
<p>当你将它放在Hugo 中访问时，会发现<code>&lt;h1&gt;这里有一句话&lt;/h1&gt;</code> 这句话被替换成了<code>&lt;!-- raw HTML omitted --&gt;</code> 而没有显示出来。</p>
<p>如果你想让你的文章支持<code>HTML</code> 元素，需要在Hugo 的配置文件<code>config.toml</code> 中加入配置：</p>
<pre><code class="language-shell">[markup]
    [markup.goldmark]
        [markup.goldmark.renderer]
            unsafe = true
</code></pre>
<p>这样，你的文章中的<code>HTML 内容</code>，将正常显示。</p>
<p>Hugo 官方文档中也给出了这个问题的详细说明，详见<a href="https://gohugo.io/getting-started/configuration-markup#goldmark">这里</a>。</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">@码农充电站</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更改</span>
    <span class="item-content">
        2020-04-06
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/2020/04/ten-lang-hellworld/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">一篇文章带你编写10种语言HelloWorld</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/2020/04/0-basics-py/">
            <span class="next-text nav-default">零基础如何自学Python</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  <span id="/2020/04/use-hugo/" class="leancloud_visitors" data-flag-title="如何用hugo 搭建博客">
		<span class="post-meta-item-text">文章阅读量 </span>
		<span class="leancloud-visitors-count">0</span>
		<p></p>
	  </span>
  <div id="vcomments"></div>
  
  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
  <script type="text/javascript">
    new Valine({
        el: '#vcomments' ,
        appId: 'fUOjiUqCOnp6nC06GF1tTK2r-gzGzoHsz',
        appKey: 'RXI3nw10URATKUAYINsDKAlc',
        notify:  false ,
        verify:  true ,
        avatar:'robohash',
        placeholder: '评论一下，说明你来过~',
        visitor:  true 
    });
  </script>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:3101968978@qq.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/codeshellme" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/u/6258380929" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/people/la-la-la-56-33-75" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://space.bilibili.com/516746464/" class="iconfont icon-bilibili" title="bilibili"></a>
  
  
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
      
    
  </div>

  <span class="copyright-year">
    &copy; 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">@码农充电站</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
